# Инструкция для мобильного приложения GDMN Отдел снабжения

Мобильное приложение GDMN заявки на покупку разработано для !!!!**администрирования пользователей мобильных решений** от компании **Амперсант**.

## 1. Руководство пользователя мобильного приложения

### 1.1 Установка и подключение

Устанавливаем приложение на мобильный телефон. После выполнения установки приложения необходимо на рабочем столе кликнуть по иконке:

![alt text](img/2.Manual/2.1.Icon.png)​

В первом экране приложения нажимаем кнопку **Подключиться** (при повторном запуске в рабочей версии программы будет происходить автоподключение).

<img src="img/2.Manual/2.1.Connection.jpg" alt="drawing" width="300"/>

Если подключение прошло успешно, то появляется экран для ввода кода активации. Здесь нужно ввести код, ранее полученный в web-admin.

<img src="img/2.Manual/2.1.Activation.jpg" alt="drawing" width="300"/> <img src="img/2.Manual/2.1.Code.jpg" alt="drawing" width="300"/>

Если код активирован, появляется экран для входа пользователя. В соответствующие поля необходимо ввести **Имя пользователя** и **Пароль** и нажать на кнопку **Войти** (в демонстрационной версии введены демо данные).

<img src="img/2.Manual/2.1.Login.jpg" alt="drawing" width="300"/> <img src="img/2.Manual/2.1.LoginUser.jpg" alt="drawing" width="300"/>

После входа в приложение попадаем в экран **Заявки**.

<img src="img/2.Manual/2.1.Requests.jpg" alt="drawing" width="300"/>

В первую очередь необходимо загрузить данные - справочники и заявки. Для этого необходимо вызвать боковое меню по нажатию на иконку меню, находящуюся в верхнем углу слева, либо же сделать свайп вправо.

<img src="img/2.Manual/2.1.Sidebar.jpg" alt="drawing" width="300"/>

Далее нажать на иконку синхронизации данных слева в нижнем углу меню.

![alt text](img/2.Manual/2.1.Sync.jpg)​

После обработки запроса в **Гедымине** необходимо через пару минут нажать на иконку загрузки данных слева в нижнем углу. Это обеспечит загрузку справочников и заявок.

### 1.2. Заявки

<img src="img/2.Manual/2.2.Requests.png" alt="drawing" width="300"/>

| Заявки   | Описание                                                                                                                                                                 |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Активные | Данные заявки являются необработанными, либо же обработанными, но не синхронизированными с Гедымином.                                                                    |
| Архив    | Данные заявки являются обработанными и отправленными в Гедымин, на них получено обратное сообщение о синхронизации. Не подлежат редактированию, возможен только просмотр |
| Все      | Активные заявки и заявки из архива                                                                                                                                       |

При нажатии на заявку, доступную к редактированию, открывается окно редактирования. Выбираем кнопки **Разрешить** или **Отклонить**. При отказе необходимо внести причину отказа в появившемся окне.

![alt text](img/2.Manual/2.2.RequestsEdit.png)​

У каждой заявки есть боковая полоска, которая отображает состояние заявки. При смене состояния заявки меняется и цвет полоски.

| Цвет полоски | Описание состояния                        |
| ------------ | ----------------------------------------- |
| Розовый      | Заявка существует                         |
| Зеленый      | Заявка обрабатывается                     |
| Желтый       | Заявка оправлена, ожидается подтверждение |
| Синий        | Заявка архивирована                       |

После создания заявки цвет боковой полоски становится розовым. После обработки заявка переходит в состояние **Обработано** и боковая полоска становится зеленой. **До нажатия кнопки Синхронизации с Гедымином можно заходить в заявку и менять решение неограниченное количество раз. После отправки заявки вход в нее запрещен** (боковая полоска становится желтой).

После повторного нажатия кнопки синхронизации от Гедымина приходит подтверждение, что заявка в базе синхронизирована с мобильным, и заявка переносится в архив (полоса становится синей). Если по какой-то причине синхронизация в Гедымине не прошла, в строке заявки в в списке заявок будет указано, что произошла ошибка синхронизации и заявку можно будет еще раз отредактировать и отправить.

Иконка **⋮** в правом верхнем углу вызывает нижнее меню, позволяющее удалить все заявки с мобильного устройства. В случае необходимости их можно загрузить из базы Гедымина нажатием кнопки синхронизации.

![alt text](img/2.Manual/2.2.RequestsList.png)​

### 1.3.Справочники

Экран **Спарвочники** содержит информацию о справочниках устройства. Данные справочники содержат информацию о

<img src="img/2.Manual/2.3.References.jpg" alt="drawing" width="300"/>

### 1.4. Настройки

Экран **Настройки** содержит информацию о настройках устройства: о параметрах связи с сервером и о настройках приложения. Настройки приложения доступны для изменения пользователем.

<img src="img/2.Manual/2.4.Settings.jpg" alt="drawing" width="300"/>

### 1.5. Профиль

Экран **Профиль** содержит информацию о пользователе и об устройстве. Также здесь можно выйти из учетной записи пользователя.

<img src="img/2.Manual/2.5.Profile.jpg" alt="drawing" width="300"/>

## 2. Руководство пользователя мобильного приложения в системе ГЕДЫМИН

В исследователе подсистема **Мобильное приложение** состоит из следующих пунктов:

![alt text](img/3.Gedemin/3.Researcher.png)​

### 01.Конфигурация

Пункт **Конфигурация** содержит параметры подключения и логины и пароли служебных пользователей, а также кнопки для проверки корректности внесенных данных.

URL содержит полный URL компьютера, где запущен сервер приложения.

Кнопка **Проверить** позволяет проверить наличие соединения с сервером. При правильной отработке получаем сообщение **_Подключение к серверу прошло успешно!_**. Кнопка **Получить код** заполняет код компании по названию из системы администрирования.

**Важно! Не изменяйте имена и пароли служебных пользователей и версии API!**

Проверить, что служебные пользователи правильно настроены в системе администрирования, можно с помощью соответствующих кнопок. При наличии ошибок в результате данной проверки система будет функционировать неправильно.

**Активная база** содержит путь к той базе, на которой возможна обработка запросов. Если путь не совпадает с путем текущей базы, запросы обрабатываться не будут, будет выдана соответствующая ошибка. **Необходимо оставить это поле пустым на рабочей базе, пока идет отладка на тестовой, чтобы даже случайно не загрузить данные с мобильного устройства на рабочую базу. После завершения периода отладки очистите это поле на тестовых базах, чтобы отправленные из мобильного данные нельзя было выгрузить на тест.**

![alt text](img/3.Gedemin/3.Configuration.png)​

![alt text](img/3.Gedemin/3.ConfigurationSuccess.png)​

### 03.Обработать запросы

В данном пункте производится обработка запросов с мобильного приложения. При подключенной автозадаче обработки ручная обработка запросов по кнопке не требуется.

### Пользователи мобильного приложения

Данный пункт содержит список пользователей с настройками.

**Важно! Не удаляйте и не редактируйте служебных пользователей gdmn и system!**

Если пользователи не настроены или в системе администрирования добавились новые, их надо импортировать из системы администрирования макросом **GDMN**. Получить пользователей из **WEB_ADMIN** в пункте Пользователи мобильного приложения. Существующие пользователи будут отредактированы, новые пользователи будут добавлены. После добавления новых пользователей их необходимо отредактировать. Для этого выберите в пункте **Пользователь** нужного пользователя из выпадающего списка, подсказка будет в поле **Логин** из мобильной системы. В пункте **Пароль** ввести тот же пароль, который присвоили в WEB_ADMIN.

![alt text](img/3.Gedemin/3.Edit.png)​
