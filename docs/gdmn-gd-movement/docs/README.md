# Инструкция для мобильного приложения "GDMN. Склад"

## 1. Подключение

Чтобы запустить приложение, находим его иконку <img src="img/1.Connection/1.IconMain.png" alt="drawing" height="32"/> на рабочем экране мобильного устройства и нажимаем на нее.

При первом запуске приложения откроется стартовый экран, в котором будет предложено выбрать режим подключения:
- Демо режим ( НАЧАТЬ РАБОТУ )
- Подключение к серверу


<img src="img/1.Connection/1.StartScreen.jpg" alt="drawing" height="400"/>


### Демо режим
При нажатии на кнопку демо режима **Начать работу** выполняется автоматический вход в приложение под тестовым пользователем.

В данном режиме можно ознакомиться с функционалом приложения offline (без подключения к базе данных) на демо данных.

Загрузка данных и работа в приложении пояснена далее в пунктах 3-8.

Выйти из демо режима можно, открыв боковую панель нажатием на иконку меню **≡**, находящуюся в верхнем углу приложения слева, или смахнув пальцем вправо с левого края устройства.

Затем перейти на экран **Профиль** и нажать на кнопку **Выйти из демо режима**.

### Подключение к серверу 
Чтобы подключиться к рабочей базе данных, необходимо выбрать **Подключиться к серверу** для перехода на экран настройки подключения (с помощью иконки <img src="img/1.Connection/1.ConfigIcon.png" alt="drawing" height="30"/> ):

<img src="img/1.Connection/1.ConnectionSettings.jpg" alt="drawing" height="400"/>

Системный администратор вашего предприятия должен сообщить вам адрес сервера и номер порта для подключения. Введите его в нижеуказанные поля. Обращаем ваше внимание, что поле ID устройства заполнять не надо. Оно будет заполнено автоматически после успешного подключения к серверу и ввода имени пользователя и пароля. В дальнейшем ID устройства может понадобиться вам для того-то и того-то.

| Параметр | Описание |
| --------------------- | ------------------------------------------ |
| Адрес сервера | Точно введите адрес, переданный вам системным администратором. Адрес должен включать протокол и доменное имя или цифровой IP адрес сервера. Пример: http://localhost |
| Порт          | Порт сервера. Пример: 3649 |
| ID устройства | Сюда вводить ничего не надо. ID устройства будет заполнено автоматически после подключения к серверу |

При нажатии на кнопку **Сохранить** переходим к окну для подключения к серверу:

<img src="img/1.Connection/1.Connection.jpg" alt="drawing" height="400"/>

Нажимаем кнопку **Подключиться**.

После успешного подключения к серверу появится экран **Активация устройства**.

В данном экране необходимо ввести код активации, который пользователь должен получить от администратора системы, и нажать **Отправить**.

При последующих запусках приложения будет происходить автоматический вход в учетную запись пользователя.

<img src="img/1.Connection/1.Activation.jpg" alt="drawing" height="400"/> <img src="img/1.Connection/1.ActivationCode.jpg" alt="drawing" height="400"/>

По нажатию на иконку в правом нижнем углу <img src="img/1.Connection/1.ConfigIcon.png" alt="drawing" height="30"/> можно снова перейти на экран подключения к серверу.

Если активация устройства прошла успешно, появится экран для входа пользователя.

В соответствующие поля необходимо ввести **Имя пользователя** и **Пароль** и нажать на кнопку **Войти**.

<img src="img/1.Connection/1.Login.jpg" alt="drawing" height="400"/> <img src="img/1.Connection/1.LoginUser.jpg" alt="drawing" height="400"/>

При успешной аутентификации пользователя откроется экран **Документы**.

## 2. Настройки

Экран **Настройки** содержит информацию о параметрах связи с сервером и настройки приложения.

Настройки приложения:

| Параметр | Описание |
| ------------ | -------- |
|Запрашивать справочники|_Если указан_, то при при каждой синхронизации на сервер будет отправляться запрос на справочники, который будет обрабатываться сервером и возвращаться в ответ c запрашиваемыми справочниками. <br> _Если не указан_, то запрос генерироваться не будет. Справочники будут выгружаться из сервера автоматически при каких-либо очередных изменениях на сервере.|
|Использовать сканер|_Если указан_, то для сканирования штрихкода будет использован сканер терминала сбора данных.<br> _Если не указан_, то сканировать штрихкоды необходимо при помощи камеры устройства|
|Время хранения документов в архиве| Количество дней хранения обработанных документов в приложении, отсчитываемое от даты документа|

Настройки весового товара:

| Параметр | Описание |
| ------------ | -------- |
Идентификатор весового товара| Число (обычно это 22 или 23), которое означает, что штрихкод, начинающийся на это число, относится к весовому товару |
|Количество символов для кода товара| Число, которое определяет идентификатор товара в штрихкоде для поиска в справочнике |
|Количество символов для веса (в гр.)| Число, задающее количество символов в штрихкоде для определения веса товара|


По нажатию на иконку меню **≡**, расположенную в правом верхнем углу, можно вернуться к начальным настройкам, выбрав пункт **Установить настройки по умолчанию**.

<img src="img/8.Settings/8.BaseSettings.jpg" alt="drawing" height="400"/> <img src="img/8.Settings/8.Settings.jpg" alt="drawing" height="400"/> <img src="img/8.Settings/8.SettingsMenu.jpg" alt="drawing" height="400"/>

## 3. Загрузка данных

Чтобы загрузить данные, предназначенные для пользователя, следует нажать на иконку синхронизации данных <img src="img/1.Connection/1.Sync.jpg" alt="drawing" height="30"/> в нижнем углу бокового меню.

Открыть боковое меню можно нажатием на иконку меню **≡**, находящуюся в верхнем углу приложения слева, или смахнув пальцем вправо с левого края устройства.

<img src="img/1.Connection/1.Docs.jpg" alt="drawing" height="400"/> <img src="img/1.Connection/1.Sidebar.jpg" alt="drawing" height="400"/> <img src="img/1.Connection/1.SyncSuccess.jpg" alt="drawing" height="400"/>

После загрузки данных в приложении должны появится справочники и все необходимые документы.

Если синхронизация прошла, но данных не появилось, то необходимо повторить синхронизацию через некоторое время.

Рядом с иконкой отобразится дата и время последней синхронизации.

<img src="img/1.Connection/1.NewSyncDate.jpg" alt="drawing" height="400"/>

## 4. Справочники

На экране **Справочники** можно просмотреть данные, загруженные в приложение для работы.

<img src="img/2.References/2.References.jpg" alt="drawing" height="400"/> <img src="img/2.References/2.Goods.jpg" alt="drawing" height="400"/> <img src="img/2.References/2.GoodPosition.jpg" alt="drawing" height="400"/>

Пример справочника контактов:

<img src="img/2.References/2.Contacts.jpg" alt="drawing" height="400"/> <img src="img/2.References/2.ContactPosition.jpg" alt="drawing" height="400"/>

Чтобы найти справочник по наименованию можно воспользоваться строкой поиска в правом верхнем углу экрана.

## 5. Остатки

**Остатки** представляют собой список товаров с ценами и количеством остатка в разрезе подразделения/организации/сотрудника на текущую дату.

При добавлении позиции в документ, который работает с остатками, список товаров будет ограничен только теми товарами, по которым осуществлялось складское движение по конкретному подразделению/организации/сотруднику.

Выберем подразделение.
На экране отображены остатки товаров для данного подразделения. По нажатию на конкретный товар можно просмотреть его цены и остаток.

<img src="img/7.Remains/7.Contacts.jpg" alt="drawing" height="400"/> <img src="img/7.Remains/7.Goods.jpg" alt="drawing" height="400"/> <img src="img/7.Remains/7.Position.jpg" alt="drawing" height="400"/>

## 6. Документы

### Cоздание документа

По нажатию на иконку **+** в верхнем правом углу переходим на экран добавления документа.

Обязательные поля для заполнения: **Номер**, **Дата**, **Тип** и поля в зависимости от типа документа.

Например, для документа прихода это поля **Откуда**, **Куда**. Для документа инвентаризации - поле **Место**.

<img src="img/3.Docs/3.AddDocTypes.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.PrihodAdd.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.InventoryAdd.jpg" alt="drawing" height="400"/>

Поля контактов могут быть 3 типов, которые при необходимости можно менять:
- Подразделение
- Организация
- Сотрудник

<img src="img/3.Docs/3.DocTypes.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.From.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.To.jpg" alt="drawing" height="400"/>

После заполнения данных документ сохраняем, нажав на иконку **✓** в правом верхнем углу.

Отредактировать введенные данные можно, нажав на шапку документа.

<img src="img/3.Docs/3.PrihodView.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.PrihodNew.jpg" alt="drawing" height="400"/>

Но есть исключения:
- Нельзя выбрать дату меньше текущей, если выбранный тип документа работает только с остатками (например, документ инвентаризации)
- Нельзя изменить тип документа, если в документ уже добавлены товары
- Нельзя изменить тип и значение контакта, по которому выбираются остатки, если в документ уже добавлены товары

<img src="img/3.Docs/3.ErrorDate.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.ErrorDocType.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.ErrorTo.jpg" alt="drawing" height="400"/>

### Добавление товара

Добавить новую позицию можно 2 способами:
- сканирование по штрихкоду
- добавление вручную из списка товаров

#### _Сканирование штрихкода_

Уточнение: если вы производите сканирование штрихкодов исключительно с помощью камеры устройства, то в настройках приложения необходимо перевести параметр **Использовать сканер** в отрицательное положение.


Нажимаем на иконку штрихкода <img src="img/10.Scanner/10.IconScanner.jpg" alt="drawing" height="22"/> в верхнем правом углу и переходим на экран сканирования товара.

Экран сканирования на ТСД:

<img src="img/3.Docs/3.ScanReader.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.ScanReaderOne.png" alt="drawing" height="400"/>

Экран сканирования на мобильном устройстве:

<img src="img/3.Docs/3.Scan.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.ScanOne.jpg" alt="drawing" height="400"/>

Сканируем штрихкод и переходим на экран позиции документа для ввода количества:

<img src="img/3.Docs/3.PrihodGoodLineOne.jpg" alt="drawing" height="400"/>

Вводим количество и сохраняем позицию, нажав на иконку **✓**.

Если отсканированный штрихкод не найден в справочнике, и если документ работает не только с остатками товаров (например, документ прихода), то в позицию подставится неизвестный товар:

<img src="img/3.Docs/3.ScanUnknown.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.PrihodGoodLineUnknown.jpg" alt="drawing" height="400"/>

Но если документ работает только с остатками (например, документ инвентаризации), то товар с неизвестным штрихкодом добавить нельзя.

<img src="img/3.Docs/3.ScanNotFound.jpg" alt="drawing" height="400"/>

#### _Добавление товара вручную_

В меню документа, расположенном в правом верхнем углу, нажимаем на пункт **Добавить товар**.
Выбираем товар из списка, воспользовавшись строкой поиска (по названию или штрихкоду). Далее вводим количество и сохраняем позицию.

<img src="img/3.Docs/3.PrihodViewMenu.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.PrihodRemains.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.PrihodRemainsSearch.jpg" alt="drawing" height="400"/>

Кроме количества в позиции документа можно заполнить поле EID, которое используется для хранения DataMatrix кода прослеживаемого товара.

Для этого необходимо нажать на кнопку **Сканировать EID** и просканировать DataMatrix код.

<img src="img/3.Docs/3.ScanEID.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.ScanDataMatrix.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.PrihodGoodLineOneNew.jpg" alt="drawing" height="400"/>

#### Удаление позиции

Если в экране просмотра документа нажать и удерживать позицию, то там появится зеленая галочка. Далее необходимо нажать на иконку Мусорная корзина, и подтвердить желание удалить данную позицию или позиции документа. 

Позиция или позиции будут удалены.

<img src="img/3.Docs/3.PrihodViewGoods.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.SwipeGood.jpg" alt="drawing" height="400"/>

### Статус документа

Цвет иконки или боковой полосы шапки документа означает его статус. При смене статуса меняется и цвет.
Имеется 4 основных статуса:

| Статус | Цвет    | Описание                          |
|------------| ------- | ------------------------------------------ |
|Черновик| Красный | Новый документ, который можно редактировать|
|Готов к отправке| Зеленый | Документ, который можно отправлять на обработку (снят признак **Черновик**). Нельзя редактировать. |
|Отправлен| Желтый  | Документ отправлен, ожидается подтверждение (после нажатия кнопки синхронизации документы со статусом **Готов к отправке** меняют статус на **Отправлен**) |
|Обработан успешно| Синий   | Документ получил подтверждение об успешной обработке на сервере (в случае, если документ обработан с ошибкой, статус меняется на **Черновик**)  |

### Порядок работы

Вернемся на экран просмотра списка документов, выбрав пункт бокового меню **Документы**:

<img src="img/3.Docs/3.DocsList.jpg" alt="drawing" height="400"/>

При создании документ имеет статус **Черновик** (красный цвет).

После ввода необходимых данных, чтобы отправить документ на обработку, необходимо снять признак **Черновик** на экране шапки документа.

Документ перейдет в состояние **Готов к отправке** (зеленый цвет) - редактировать данные нельзя.

<img src="img/3.Docs/3.PrihodEditDraft.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.PrihodEditReady.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.DocsReady.jpg" alt="drawing" height="400"/>

Пока документ не отправлен, его можно вернуть из статуса **Готов к отправке** в статус **Черновик** и отредактировать данные.

<<<<<<< HEAD
### Отправка документа

Чтобы отправить все документы со статусом **Готов к отправке** на сервер, необходимо нажать на иконку синхронизации <img src="img/1.Connection/1.Sync.jpg" alt="drawing" height="27"/> в боковом меню (открыть боковое меню можно нажатием на иконку меню " **≡** ", находящуюся в верхнем углу приложения слева, или смахнув пальцем вправо с левого края устройства). 

Также можно отправить на сервер ОДИН документ, для этого нажать на иконку <img src="img/1.Connection/1.IconSend.jpg" alt="drawing" height="22"/> , находящуюся над шапкой документа. 
=======
Чтобы отправить документы со статусом **Готов к отправке** на сервер, необходимо нажать на иконку синхронизации.
>>>>>>> 04fc52e44bd77be2b929eca067318d7efbc81d4a

После отправки документ перейдет в статус **Отправлен** (желтый цвет) - редактирование невозможно.

<img src="img/3.Docs/3.DocsSentSync.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.DocsSent.jpg" alt="drawing" height="400"/>

Далее необходимо подождать 1-2 минуту и синхронизировать данные снова для получения ответа обработки, цвет станет синим.

<img src="img/3.Docs/3.DocsProcessed.jpg" alt="drawing" height="400"/>

### Удаление документа

Для удаления нужно нажать на необходимый документ и удерживать его, после чего появится зеленая галочка, которая выделит данный документ среди прочих. Далее необходимо нажать иконку Мусорная корзина и подтвердить желание удалить документ, и документ удаляется. 

<img src="img/3.Docs/3.DelDoc.jpg" alt="drawing" height="400"/>

Используя пункты меню можно:
- перейти на редактирование шапки документа (если статус **Черновик**)
- копировать документ
- удалить документ (если статус **Черновик**)

### Фильтры

Для удобства просмотра на экране документов можно использовать фильтры и сортировку:
- фильтр по типу документа
- фильтр по статусу документа
- сортировка по дате

<img src="img/3.Docs/3.SortDocTypes.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.SortStatus.jpg" alt="drawing" height="400"/> <img src="img/3.Docs/3.SortDate.jpg" alt="drawing" height="400"/>

| Фильтр по статусу | Описание                                                                                                                                                                    |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Все             | Все документы                                                                                                                                    |
| Активные        | Все документы, кроме тех, которые уже обработаны на сервере (со статусом **Черновик**, **Готов к отправке**, **Отправлен**).                                                                |
| Черновик           | Документы со статусом **Черновик**|
| Готово           | Документы со статусом **Готов к отправке**|
| Отправлено           | Документы со статусом **Отправлен**|
| Обработано           | Документы со статусом **Обработан успешно**|

## 7. Профиль

Экран **Профиль** содержит информацию о пользователе и об устройстве. Также здесь можно выйти из учетной записи пользователя.

Если вход был произведен в демо режиме, кнопка **Сменить пользователя** меняется на **Выйти из демо режима**.

Также этот экран позволяет удалить все справочники и документы. Для этого необходимо нажать на иконку меню, расположенную в правом верхнем углу, и выбрать пункт **Удалить все справочники и документы**.

<img src="img/9.Profile/9.Profile.jpg" alt="drawing" height="400"/> <img src="img/9.Profile/9.ProfileDemo.jpg" alt="drawing" height="400"/> <img src="img/9.Profile/9.ClearData.jpg" alt="drawing" height="400"/>


## 8. Сканирование

<<<<<<< HEAD
Уточнение: **если вы производите сканирование штрихкодов исключительно с помощью камеры мобильного устройства, то в настройках приложения необходимо перевести параметр ***Использовать сканер*** в отрицательное положение.**

На данный момент, с помощью сканера в документах **Сканирование** можно считать **DataMatrix код**. С помощью сканера в документах **Приход**, **Инвентаризация** считываются линейные штрихкоды. Скоро сканер сможет распознавать и линейные штрихккоды, и двухмерные.

Вернемся на экран списка документов сканирования, выбрав пункт бокового меню **Сканирование** (открыть боковое меню можно нажатием на иконку меню " **≡** ", находящуюся в верхнем углу приложения слева, или смахнув пальцем вправо с левого края устройства).

Чтобы найти документ по наименованию можно воспользоваться строкой поиска, нажав на иконку <img src="img/1.Connection/1.IconSearch.jpg" alt="drawing" height="22"/>  **Поиск** в правом верхнем углу экрана.

По нажатию иконки " **+** ", в верхнем правом углу, переходим на экран добавления документа. При создании документ имеет статус Черновик. Заполняем необходимые поля - **Номер, Дата, Подразделение, Комментарий** и сохраняем документ, нажав на иконку 
**✓**.

<img src="img/10.Scanner/10.ScanCreateDoc.jpg" alt="drawing" height="400"/>

Отредактировать введенные данные можно, нажав на шапку документа или используя пункт меню " **⁝** " **Редактировать данные**.

<img src="img/10.Scanner/10.ScanDoc.jpg" alt="drawing" height="400"/> <img src="img/10.Scanner/10.ScanEditDoc.jpg" alt="drawing" height="400"/>


Нажимаем на иконку штрихкода <img src="img/10.Scanner/10.IconScanner.jpg" alt="drawing" height="22"/> в верхнем правом углу и переходим на экран сканирования товара.


Для удобства работы во время сканирования можно использовать кнопки **Вспышка** <img src="img/1.Connection/1.IconFlash.jpg" alt="drawing" height="22"/>  или **Вибрация**  <img src="img/1.Connection/1.IconVibr.jpg" alt="drawing" height="22"/>.


<img src="img/10.Scanner/10.ScanDoc.jpg" alt="drawing" height="400"/> <img src="img/10.Scanner/10.ScreenScan.jpg" alt="drawing" height="400"/> <img src="img/10.Scanner/10.DocWithScans.jpg" alt="drawing" height="400"/> 

После ввода необходимых данных, можно отправить ДАННЫЙ документ на обработку двумя способами:

* в документе необходимо вручную поменять признак **Черновик** на признак **Готов к отправке** с помощью значка <img src="img/1.Connection/1.IconEdit.jpg" alt="drawing" height="22"/> в шапке документа. Шапка документа изменит цвет с красного на зелёный, редактировать данные уже нельзя. Далее нажать на значок <img src="img/1.Connection/1.IconSend.jpg" alt="drawing" height="22"/>  и документ отправится. Шапка документа изменит цвет на жёлтый (статус **Отправлен**).

* нажать на значок <img src="img/1.Connection/1.IconSend.jpg" alt="drawing" height="22"/>, находящийся над шапкой документа, который автоматически переведёт признак с **Черновик** на **Готов к отправке** и отправит документ на обработку.


Чтобы отправить ВСЕ документы со статусом **Готов к отправке** на сервер, нужно выйти на экран документов **Сканирование**, открыть боковое меню нажатием на иконку меню " **≡** ", находящуюся в верхнем углу приложения слева, и нажать на кнопку синхронизации <img src="img/1.Connection/1.Sync.jpg" alt="drawing" height="27"/>. Но, необходимо отследить, чтобы все нужные документы были в состоянии **Готов к отправке**, то есть значок документа должен быть зелёного цвета.

<img src="img/10.Scanner/10.ScanSync.jpg" alt="drawing" height="400"/> <img src="img/10.Scanner/10.AllDocsScan.jpg" alt="drawing" height="400"/>

## 9. Значение иконок
=======
Уточнение: если вы производите сканирование штрихкодов исключительно с помощью камеры устройства, то в настройках приложения необходимо перевести параметр **Использовать сканер** в отрицательное положение.
>>>>>>> 04fc52e44bd77be2b929eca067318d7efbc81d4a

Нажимаем на иконку штрихкода в верхнем правом углу и переходим на экран сканирования товара.
